<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1, shrink-to-fit=no" />
    <meta name="go-import" content="kubevirt.io/kubevirt git https://github.com/kubevirt/kubevirt">
    <meta name="go-import" content="kubevirt.io/containerized-data-importer git https://github.com/kubevirt/containerized-data-importer">
    <meta name="description" content="Virtual Machine Management on Kubernetes
">
    <title>Virtual Machines</title>

    <link rel="apple-touch-icon" sizes="72x72" href="/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicon/site.webmanifest">
    <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://www.kubevirt.io//docs/workloads/virtual-machines.html">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
</head>


  <body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" role="navigation">
        <a class="navbar-brand" href="/">
    <img src="/assets/images/KubeVirt_logo_color.svg" class="navbar-brand-image d-inline-block align-top" alt="KubeVirt.io">
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-th-large"></i>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav">
      

      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/blogs/">Blogs</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/videos/">Videos</a>
        </li>
      
        <li  class="nav-item active" >
          <a class="nav-link text-uppercase" href="/docs/">Docs</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/community/">Community</a>
        </li>
      

    </ul>
  </div>

    </nav>

    <main role="main" style="margin-top: 60px;">
      <div class="container-fluid">
        <div class="row">
          <h1 class="page-title offset-lg-1">Docs</h1>
        </div>
        <div class="row">
          <div class="col-sm-12 col-md-4 col-lg-3 offset-lg-1">
            <!-- <div class="search-bar">
              <form action="/search.html" method="get">
                <label for="search-box">Search</label>
                <input type="text" id="search-box" name="query">
                <input type="submit" value="search">
              </form>
            </div> -->
            
  
    <h3 class="docs-title">
      <a href="/docs"  class="docs-title--item" >Introduction</a>
    </h3>
    
  
    <h3 class="docs-title">
      <a href="/docs/installation.html"  class="docs-title--item" >Installation</a>
    </h3>
    
    <ul class="docs-navigation">
      
        <li class="docs-navigation--item">
          <a href="/docs/installation/admission-controllers.html"  class="docs-navigation--item_link" >
            Admission Controllers
          </a>
          
        </li>
      
        <li class="docs-navigation--item">
          <a href="/docs/installation/feature-matrix.html"  class="docs-navigation--item_link" >
            Feature Matrix
          </a>
          
        </li>
      
    </ul>
    
  
    <h3 class="docs-title">
      <a href="/docs/usage.html"  class="docs-title--item" >Usage</a>
    </h3>
    
  
    <h3 class="docs-title">
      <a href="/docs/authorization.html"  class="docs-title--item" >Authorization</a>
    </h3>
    
  
    <h3 class="docs-title">
      <a href="/docs/workloads.html"  class="docs-title--item" >Workloads</a>
    </h3>
    
    <ul class="docs-navigation">
      
        <li class="docs-navigation--item">
          <a href="/docs/workloads/virtual-machines.html"  class="docs-navigation--item_link active" >
            Virtual Machines
          </a>
          
            <ul class="docs-navigation_sub">
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/creation.html"  class="docs-navigation_sub--item_link" >
                    Creation
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/node-eviction.html"  class="docs-navigation_sub--item_link" >
                    Node Eviction
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/presets.html"  class="docs-navigation_sub--item_link" >
                    Presets
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/life-cycle.html"  class="docs-navigation_sub--item_link" >
                    Life-cycle
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/dns-for-services.html"  class="docs-navigation_sub--item_link" >
                    DNS for Services and VirtualMachineInstances
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/expose-vm-services.html"  class="docs-navigation_sub--item_link" >
                    Expose VirtualMachineInstances as Services
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/create-networkpolicy.html"  class="docs-navigation_sub--item_link" >
                    Create Networkpolicy
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/graphical-and-console-access.html"  class="docs-navigation_sub--item_link" >
                    Graphical and Console Access
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/disks-and-volumes.html"  class="docs-navigation_sub--item_link" >
                    Disks and Volumes
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/interfaces-networks.html"  class="docs-navigation_sub--item_link" >
                    Interfaces and Networks
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/startup-scripts.html"  class="docs-navigation_sub--item_link" >
                    Startup Scripts
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/guest-os-info.html"  class="docs-navigation_sub--item_link" >
                    Guest Operating System Information
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/virtual-hardware-config.html"  class="docs-navigation_sub--item_link" >
                    Virtualized Hardware Configuration
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/vms/vms-to-nodes.html"  class="docs-navigation_sub--item_link" >
                    Assigning VMs to Nodes
                  </a>
                </li>
            
            </ul>
          
        </li>
      
        <li class="docs-navigation--item">
          <a href="/docs/workloads/controllers.html"  class="docs-navigation--item_link" >
            Controllers
          </a>
          
            <ul class="docs-navigation_sub">
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/controllers/virtualmachine.html"  class="docs-navigation_sub--item_link" >
                    VirtualMachine
                  </a>
                </li>
            
                <li class="docs-navigation_sub--item">
                  <a href="/docs/workloads/controllers/virtual-machine-replica-set.html"  class="docs-navigation_sub--item_link" >
                    VirtualMachineInstanceReplicaSet
                  </a>
                </li>
            
            </ul>
          
        </li>
      
        <li class="docs-navigation--item">
          <a href="/docs/workloads/templates.html"  class="docs-navigation--item_link" >
            Templates
          </a>
          
        </li>
      
        <li class="docs-navigation--item">
          <a href="/docs/workloads/annotations-labels.html"  class="docs-navigation--item_link" >
            Annotations and Labels
          </a>
          
        </li>
      
    </ul>
    
  
    <h3 class="docs-title">
      <a href="/docs/additional-resources.html"  class="docs-title--item" >Additional Resources</a>
    </h3>
    
  


          </div>
          <div class="col-sm-12 col-md-8 col-lg-8 docs">
            <h1 id="virtual-machines">Virtual Machines</h1>

<p>An <em>VirtualMachine</em>  provides additional management capabilities to a
VirtualMachineInstance inside the cluster. That includes:</p>

<ul>
  <li>ABI stability</li>
  <li>Start/stop/restart capabilities on the controller level</li>
  <li>Offline configuration change with propagation on VirtualMachineInstance recreation</li>
  <li>Ensure that the VirtualMachineInstance is running if it should be running</li>
</ul>

<p>It focuses on a 1:1 relationship between the controller instance and a virtual
machine instance. In many ways it is very similar to a
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/">StatefulSet</a>
with <code class="highlighter-rouge">spec.replica</code> set to <code class="highlighter-rouge">1</code>.</p>

<h2 id="how-to-use-a-virtualmachine">How to use a VirtualMachine</h2>

<p>A VirtualMachine will make sure that a VirtualMachineInstance object with an
identical name will be present in the cluster, if <code class="highlighter-rouge">spec.running</code> is set to
<code class="highlighter-rouge">true</code>. Further it will make sure that a VirtualMachineInstance will be removed from
the cluster if <code class="highlighter-rouge">spec.running</code> is set to <code class="highlighter-rouge">false</code>.</p>

<h3 id="starting-and-stopping">Starting and stopping</h3>

<p>After creating a VirtualMachine it can be switched on or off like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Start the virtual machine:</span>
virtctl start myvm

<span class="c"># Stop the virtual machine:</span>
virtctl stop myvm
</code></pre></div></div>

<p><code class="highlighter-rouge">kubectl</code> can be used too:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Start the virtual machine:</span>
kubectl patch virtualmachine myvm <span class="nt">--type</span> merge <span class="nt">-p</span> <span class="se">\</span>
    <span class="s1">'{"spec":{"running":true}}'</span>

<span class="c"># Stop the virtual machine:</span>
kubectl patch virtualmachine myvm <span class="nt">--type</span> merge <span class="nt">-p</span> <span class="se">\</span>
    <span class="s1">'{"spec":{"running":false}}'</span>
</code></pre></div></div>

<h3 id="controller-status">Controller status</h3>

<p>Once a VirtualMachineInstance is created, its state will be tracked via
<code class="highlighter-rouge">status.created</code> and <code class="highlighter-rouge">status.ready</code>. If a VirtualMachineInstance exists in the cluster,
<code class="highlighter-rouge">status.created</code> will equal to <code class="highlighter-rouge">true</code>. If the VirtualMachineInstance is also ready,
<code class="highlighter-rouge">status.ready</code> will equal <code class="highlighter-rouge">true</code> too.</p>

<p>If a VirtualMachineInstance reaches a final state but the <code class="highlighter-rouge">spec.running</code> equals <code class="highlighter-rouge">true</code>,
the VirtualMachine controller will set <code class="highlighter-rouge">status.ready</code> to <code class="highlighter-rouge">false</code> and
re-create the VirtualMachineInstance.</p>

<h3 id="restarting">Restarting</h3>

<p>A VirtualMachineInstance restart can be triggered by deleting the VirtualMachineInstance. This
will also propagate configuration changes from the template in the
VirtualMachine:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Restart the virtual machine (you delete the instance!):</span>
kubectl delete virtualmachineinstance myvm
</code></pre></div></div>

<h3 id="fencing-considerations">Fencing considerations</h3>

<p>A VirtualMachine will never restart or re-create a VirtualMachineInstance until
the current instance of the VirtualMachineInstance is deleted from the cluster.</p>

<h3 id="exposing-as-a-service">Exposing as a Service</h3>
<p>A VirtualMachine can be exposed as a service. The actual service will be available once the VirtualMachineInstance starts without additional interaction.</p>

<p>For example, exposing SSH port (22) as a <code class="highlighter-rouge">ClusterIP</code> service using <code class="highlighter-rouge">virtctl</code> after the OfflineVirtualMAchine was created, but before it started:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>virtctl expose virtualmachine vmi-ephemeral <span class="nt">--name</span> vmiservice <span class="nt">--port</span> 27017 <span class="nt">--target-port</span> 22
</code></pre></div></div>

<p>All service exposure options that apply to a VirtualMachineInstance apply to a VirtualMachine. See <a href="http://www.kubevirt.io/user-guide/#/workloads/virtual-machines/expose-service">Exposing VirtualMachineInstance</a> for more details.</p>

<h2 id="when-to-use-a-virtualmachine">When to use a VirtualMachine</h2>

<h3 id="when-abi-stability-is-required-between-restarts">When ABI stability is required between restarts</h3>

<p>A <em>VirtualMachine</em> makes sure that VirtualMachineInstance ABI configurations
are consistent between restarts. A classical example are licenses which are
bound to the firmware UUID of a virtual machine. The <em>VirtualMachine</em>
makes sure that the UUID will always stay the same without the user having to
take care of it.</p>

<p>One of the main benefits is that a user can still make use of defaulting logic,
although a stable ABI is needed.</p>

<h3 id="when-config-updates-should-be-picked-up-on-the-next-restart">When config updates should be picked up on the next restart</h3>

<p>If the VirtualMachineInstance configuration should be modifyable inside the cluster and
these changes should be picked up on the next VirtualMachineInstance restart. This
means that no hotplug is involved.</p>

<h3 id="when-you-want-to-let-the-cluster-manage-your-individual-virtualmachineinstance">When you want to let the cluster manage your individual VirtualMachineInstance</h3>

<p>Kubernetes as a declarative system can help you to manage the VirtualMachineInstance.</p>

<p>You tell it that you want this VirtualMachineInstance with your application running,
the VirtualMachine will try to make sure it stays running.</p>

<blockquote>
  <p><strong>Note</strong>: The current believe is that if it is defined that the
VirtualMachineInstance should be running, it should be running. This is different to
many classical virtualization platforms, where VMs stay down if they were
switched off. Restart policies may be added if needed. Please provide your
use-case if you need this!</p>
</blockquote>

<h2 id="example">Example</h2>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kubevirt.io/v1alpha2</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">VirtualMachine</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">creationTimestamp</span><span class="pi">:</span> <span class="no">null</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="s">kubevirt.io/vm</span><span class="pi">:</span> <span class="s">vm-cirros</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">vm-cirros</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">running</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">creationTimestamp</span><span class="pi">:</span> <span class="no">null</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="s">kubevirt.io/vm</span><span class="pi">:</span> <span class="s">vm-cirros</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">domain</span><span class="pi">:</span>
        <span class="na">devices</span><span class="pi">:</span>
          <span class="na">disks</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">disk</span><span class="pi">:</span>
              <span class="na">bus</span><span class="pi">:</span> <span class="s">virtio</span>
            <span class="na">name</span><span class="pi">:</span> <span class="s">registrydisk</span>
            <span class="na">volumeName</span><span class="pi">:</span> <span class="s">registryvolume</span>
          <span class="pi">-</span> <span class="na">disk</span><span class="pi">:</span>
              <span class="na">bus</span><span class="pi">:</span> <span class="s">virtio</span>
            <span class="na">name</span><span class="pi">:</span> <span class="s">cloudinitdisk</span>
            <span class="na">volumeName</span><span class="pi">:</span> <span class="s">cloudinitvolume</span>
        <span class="na">machine</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
        <span class="na">resources</span><span class="pi">:</span>
          <span class="na">requests</span><span class="pi">:</span>
            <span class="na">memory</span><span class="pi">:</span> <span class="s">64M</span>
      <span class="na">terminationGracePeriodSeconds</span><span class="pi">:</span> <span class="s">0</span>
      <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">registryvolume</span>
        <span class="na">registryDisk</span><span class="pi">:</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">kubevirt/cirros-registry-disk-demo:latest</span>
      <span class="pi">-</span> <span class="na">cloudInitNoCloud</span><span class="pi">:</span>
          <span class="na">userDataBase64</span><span class="pi">:</span> <span class="s">IyEvYmluL3NoCgplY2hvICdwcmludGVkIGZyb20gY2xvdWQtaW5pdCB1c2VyZGF0YScK</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">cloudinitvolume</span>
</code></pre></div></div>

<p>Saving this manifest into <code class="highlighter-rouge">vm.yaml</code> and submitting it to Kubernetes will
create the controller instance:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl create <span class="nt">-f</span> vm.yaml
virtualmachine <span class="s2">"vm-cirros"</span> created
</code></pre></div></div>

<p>Since <code class="highlighter-rouge">spec.running</code> is set to <code class="highlighter-rouge">false</code>, no vmi will be created:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get vmis
No resources found.
</code></pre></div></div>

<p>Let’s start the VirtualMachine:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>virtctl start omv vm-cirros
</code></pre></div></div>

<p>As expected, a VirtualMachineInstance called <code class="highlighter-rouge">vm-cirros</code> got created:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">$ kubectl describe vm vm-cirros</span>
<span class="na">Name</span><span class="pi">:</span>         <span class="s">vm-cirros</span>
<span class="na">Namespace</span><span class="pi">:</span>    <span class="s">default</span>
<span class="na">Labels</span><span class="pi">:</span>       <span class="s">kubevirt.io/vm=vm-cirros</span>
<span class="na">Annotations</span><span class="pi">:</span>  <span class="s">&lt;none&gt;</span>
<span class="na">API Version</span><span class="pi">:</span>  <span class="s">kubevirt.io/v1alpha2</span>
<span class="na">Kind</span><span class="pi">:</span>         <span class="s">VirtualMachine</span>
<span class="na">Metadata</span><span class="pi">:</span>
  <span class="na">Cluster Name</span><span class="pi">:</span>        
  <span class="na">Creation Timestamp</span><span class="pi">:</span>  <span class="s">2018-04-30T09:25:08Z</span>
  <span class="na">Generation</span><span class="pi">:</span>          <span class="s">0</span>
  <span class="na">Resource Version</span><span class="pi">:</span>    <span class="s">6418</span>
  <span class="na">Self Link</span><span class="pi">:</span>           <span class="s">/apis/kubevirt.io/v1alpha2/namespaces/default/virtualmachines/vm-cirros</span>
  <span class="na">UID</span><span class="pi">:</span>                 <span class="s">60043358-4c58-11e8-8653-525500d15501</span>
<span class="na">Spec</span><span class="pi">:</span>
  <span class="na">Running</span><span class="pi">:</span>  <span class="no">true</span>
  <span class="na">Template</span><span class="pi">:</span>
    <span class="na">Metadata</span><span class="pi">:</span>
      <span class="na">Creation Timestamp</span><span class="pi">:</span>  <span class="s">&lt;nil&gt;</span>
      <span class="na">Labels</span><span class="pi">:</span>
        <span class="s">Kubevirt . Io / Ovmi</span><span class="pi">:</span>  <span class="s">vm-cirros</span>
    <span class="na">Spec</span><span class="pi">:</span>
      <span class="na">Domain</span><span class="pi">:</span>
        <span class="na">Devices</span><span class="pi">:</span>
          <span class="na">Disks</span><span class="pi">:</span>
            <span class="na">Disk</span><span class="pi">:</span>
              <span class="na">Bus</span><span class="pi">:</span>        <span class="s">virtio</span>
            <span class="na">Name</span><span class="pi">:</span>         <span class="s">registrydisk</span>
            <span class="na">Volume Name</span><span class="pi">:</span>  <span class="s">registryvolume</span>
            <span class="na">Disk</span><span class="pi">:</span>
              <span class="na">Bus</span><span class="pi">:</span>        <span class="s">virtio</span>
            <span class="na">Name</span><span class="pi">:</span>         <span class="s">cloudinitdisk</span>
            <span class="na">Volume Name</span><span class="pi">:</span>  <span class="s">cloudinitvolume</span>
        <span class="na">Machine</span><span class="pi">:</span>
          <span class="na">Type</span><span class="pi">:</span>  
        <span class="na">Resources</span><span class="pi">:</span>
          <span class="na">Requests</span><span class="pi">:</span>
            <span class="na">Memory</span><span class="pi">:</span>                      <span class="s">64M</span>
      <span class="na">Termination Grace Period Seconds</span><span class="pi">:</span>  <span class="s">0</span>
      <span class="na">Volumes</span><span class="pi">:</span>
        <span class="na">Name</span><span class="pi">:</span>  <span class="s">registryvolume</span>
        <span class="na">Registry Disk</span><span class="pi">:</span>
          <span class="na">Image</span><span class="pi">:</span>  <span class="s">kubevirt/cirros-registry-disk-demo:latest</span>
        <span class="na">Cloud Init No Cloud</span><span class="pi">:</span>
          <span class="na">User Data Base 64</span><span class="pi">:</span>  <span class="s">IyEvYmluL3NoCgplY2hvICdwcmludGVkIGZyb20gY2xvdWQtaW5pdCB1c2VyZGF0YScK</span>
        <span class="na">Name</span><span class="pi">:</span>                 <span class="s">cloudinitvolume</span>
<span class="na">Status</span><span class="pi">:</span>
  <span class="na">Created</span><span class="pi">:</span>  <span class="no">true</span>
  <span class="na">Ready</span><span class="pi">:</span>    <span class="no">true</span>
<span class="na">Events</span><span class="pi">:</span>
  <span class="s">Type    Reason            Age   From                              Message</span>
  <span class="s">----    ------            ----  ----                              -------</span>
  <span class="s">Normal  SuccessfulCreate  15s   virtualmachine-controller  Created virtual machine</span><span class="pi">:</span> <span class="s">vm-cirros</span>
</code></pre></div></div>

<h3 id="kubectl-commandline-interactions">kubectl commandline interactions</h3>

<p>Whenever you want to manipulate the VirtualMachine through the
commandline you can use the kubectl command. The following are examples
demonstrating how to do it.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Define a virtual machine:</span>
kubectl create <span class="nt">-f</span> myvm.yaml

<span class="c"># Start the virtual machine:</span>
kubectl patch virtualmachine myvm <span class="nt">--type</span> merge <span class="nt">-p</span> <span class="se">\</span>
    <span class="s1">'{"spec":{"running":true}}'</span>

<span class="c"># Look at virtual machine status and associated events:</span>
kubectl describe virtualmachine myvm

<span class="c"># Look at the now created virtual machine instance status and associated events:</span>
kubectl describe virtualmachineinstance myvm

<span class="c"># Stop the virtual machine instance:</span>
kubectl patch virtualmachine myvm <span class="nt">--type</span> merge <span class="nt">-p</span> <span class="se">\</span>
    <span class="s1">'{"spec":{"running":false}}'</span>

<span class="c"># Restart the virtual machine (you delete the instance!):</span>
kubectl delete virtualmachineinstance myvm

<span class="c"># Implicit cascade delete (first deletes the virtual machine and then the virtual machine)</span>
kubectl delete virtualmachine myvm

<span class="c"># Explicit cascade delete (first deletes the virtual machine and then the virtual machine)</span>
kubectl delete virtualmachine myvm <span class="nt">--cascade</span><span class="o">=</span><span class="nb">true</span>

<span class="c"># Orphan delete (The running virtual machine is only detached, not deleted)</span>
<span class="c"># Recreating the virtual machine would lead to the adoption of the virtual machine instance</span>
kubectl delete virtualmachine myvm <span class="nt">--cascade</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div></div>

          </div>
        </div>
      </div>
    </main>

    <footer class="footer" role="footer">
      <div class="container-fluid">
  <div class="row justify-content-center">
    <div class="col-sm-12 col-md-5">
      <p class="privacy-statement text-sm-left" style="text-align: center;">
        &copy; <script type="text/javascript"> document.write(new Date().getFullYear()); </script> KubeVirt | <a href="/privacy" class="privacy-statement-link">Privacy Statement</a>
      </p>
    </div>
    <div class="col-sm-12 col-md-5" style="text-align: center;">
      <p class="text-md-right">
        <a href="https://twitter.com/kubevirt" aria-label="Visit us on Twitter" class="link-social-twitter">
          <i class="fab fa-twitter fa-lg"></i>
        </a>
        <a href="https://github.com/kubevirt" aria-label="View our repo on GitHub" class="link-social-github">
          <i class="fab fa-github fa-lg"></i>
        </a>
        <a href="https://groups.google.com/forum/#!forum/kubevirt-dev" aria-label="Send us an email" class="link-social-mail">
          <i class="fas fa-envelope fa-lg"></i>
        </a>
        <a href="https://calendar.google.com/calendar/embed?src=18pc0jur01k8f2cccvn5j04j1g%40group.calendar.google.com&ctz=Etc%2FGMT"
            aria-label="See our calendar"
            class="link-social-calendar">
          <i class="fas fa-calendar fa-lg"></i>
        </a>
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col offset-md-1 text-sm-left footer-licensing" style="text-align: center;">
      Code licensed under <a href="https://github.com/kubevirt/kubevirt/blob/master/LICENSE">Apache 2.0</a>,
      site under <a href="https://github.com/kubevirt/kubevirt.github.io/blob/master/LICENSE">MIT</a>.
    </div>
  </div>
</div>

    </footer>

    <script defer src="https://use.fontawesome.com/releases/v5.1.0/js/all.js" integrity="sha384-3LK/3kTpDE/Pkp8gTNp2gR/2gOiwQ6QaO7Td0zV76UFJVhqLl4Vl3KL1We6q6wR9" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <script id="dsq-count-scr" src="//kubevirt-io.disqus.com/count.js" async></script>
    <script src="/js/kubevirt-io.js"></script>
  </body>
</html>
