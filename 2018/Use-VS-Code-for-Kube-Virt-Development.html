<!doctype html>
<html lang="en">

  <head>
    <!-- Adding Adobe Analytics, the google Analytics will be removed after abobe will be well configured -->
    <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>

    <!-- Global site tag (gtag.js) - Google Analytics, when Adobe Analytics is added, remove next line -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119267218-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-119267218-1');
    </script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1, shrink-to-fit=no" />
    <meta name="go-import" content="kubevirt.io/kubevirt git https://github.com/kubevirt/kubevirt">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Use Vs Code For Kube Virt Development</title>
    <meta name="description" content="Virtual Machine Management on Kubernetes
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://www.kubevirt.io//2018/Use-VS-Code-for-Kube-Virt-Development.html">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href=/assets/favicon/favicon.png>
</head>


  <body>
    <nav class="navbar navbar-expand-lg navbar-dark" style="position: absolute; top: 0; background-image: linear-gradient(to top, #3accc5, #00aab2); width: 100%;">
        <a class="navbar-brand" href="/">
    <img src="/assets/images/KubeVirt_logo_color.svg" height="30" class="d-inline-block align-top" alt="">
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-th-large"></i>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      

      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/blogs/">Blogs</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/videos/">Videos</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/docs/">Docs</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/community/">Community</a>
        </li>
      

    </ul>
  </div>

    </nav>

    <section style="margin-top: 60px;">
      <div class="container">
  <div class="row">
    <div class="col">
      <div class="post blogContent">

        <header class="post-header">
          <h1></h1>
          <h1 class="post-title">Use Vs Code For Kube Virt Development</h1>
          <span class="blogAuthor">by SchSeba - </span><span class="post-meta">May 22, 2018  </span>
        </header>
        <article class="post-content">
          <h1 id="introduction">Introduction</h1>

<p>In this post we will install and configure Visual studio code (vscode) for KubeVirt development and debug.</p>

<p>Visual Studio Code is a source code editor developed by Microsoft for Windows, Linux and macOS.</p>

<p>It includes support for debugging, embedded Git control, syntax highlighting, intelligent code completion, snippets, and code refactoring.</p>

<h1 id="golang-installation">Golang Installation</h1>

<p>GO installation is required, We can find the binaries in <a href="https://golang.org/dl/">golang page</a>.</p>

<h2 id="golang-linux-installation">Golang Linux Installation</h2>

<p>After downloading the binaries extract them with the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -C /usr/local -xzf go$VERSION.$OS-$ARCH.tar.gz
</code></pre></div></div>

<p>Now lets Add /usr/local/go/bin to the PATH environment variable.</p>

<p>You can do this by adding this line to your /etc/profile (for a system-wide installation) or $HOME/.profile:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export PATH=$PATH:/usr/local/go/bin
</code></pre></div></div>

<h2 id="golang-windows-installation">Golang Windows Installation</h2>

<p>Open the MSI file and follow the prompts to install the Go tools.</p>

<p>By default, the installer puts the Go distribution in C:\Go.</p>

<p>The installer should put the C:\Go\bin directory in your PATH environment variable.</p>

<p>You may need to restart any open command prompts for the change to take effect.</p>

<h1 id="vscode-installation">VSCODE Installation</h1>
<p>Now we will install Visual Studio Code in our system.</p>

<h2 id="for-linux-machines">For linux machines</h2>
<p>We need to choose our linux distribution.</p>

<h3 id="for-rhelcentosfedora">For RHEL/Centos/Fedora</h3>
<p>The following script will install the key and repository:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc
sudo sh -c 'echo -e "[code]\nname=Visual Studio Code\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc" &gt; /etc/yum.repos.d/vscode.repo'
</code></pre></div></div>

<p>Then update the package cache and install the package using dnf (Fedora 22 and above):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dnf check-update
sudo dnf install code
</code></pre></div></div>

<p>Or on older versions using yum:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum check-update
sudo yum install code
</code></pre></div></div>

<h3 id="for-debianubuntu">For Debian/Ubuntu</h3>
<p>We need to download the .deb package from the <a href="https://code.visualstudio.com/Download">vscode download page</a>,
and from the command line run the package management.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo dpkg -i &lt;file&gt;.deb
sudo apt-get install -f # Install dependencies
</code></pre></div></div>

<h1 id="for-windows-machines">For Windows machines</h1>
<p>Download the <a href="https://go.microsoft.com/fwlink/?LinkID=534107">Visual Studio Code installer</a>, and then run the installer (VSCodeSetup-version.exe)</p>

<h1 id="go-project-struct">Go Project struct</h1>
<p>Lets create the following structure for our kubevirt project development environment:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├── &lt;Go-projects-folder&gt; # Your Golang projects root folder
│   ├── bin
│   ├── pkg
│   ├── src
│   │   ├── kubevirt.io
</code></pre></div></div>

<p>Now navigate to kubevirt.io folder and run:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone &lt;kubevirt-fork&gt;
</code></pre></div></div>

<h1 id="install-vscode-extensions">Install VSCODE Extensions</h1>
<p>Now we are going to install some extensions for a better development experience with the IDE.</p>

<p>Open vscode and select your go project root folder you created in the last step.</p>

<p>On the extensions tab (Ctrl+Shift+X), search for golang and install it.</p>

<p>Now open the command palette (Ctrl+Shift+P) view-&gt;Command Palette and type “Go: install/update tools”, this will install all the requirements for example: delve debugger, etc…</p>

<p>(optional) We can install docker extension for syntax highlighting, commands, etc..</p>

<p><img src="../assets/2018-05-22-Use-VS-Code-for-Kube-Virt-Development/extension-install.png" alt="Extension-Install" /></p>

<h1 id="gopath-and-goroot-configuration">GOPATH and GOROOT configuration</h1>
<p>Open the vscode configuration file (ctrl+,) file-&gt;preferences-&gt;settings.</p>

<p>Now on the right file we need to add this configuration:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"go.gopath": "&lt;Go-projects-folder&gt;",
"go.goroot": "/usr/local/go",
</code></pre></div></div>

<p><img src="../assets/2018-05-22-Use-VS-Code-for-Kube-Virt-Development/settings.png" alt="settings" /></p>

<h1 id="create-debug-configuration">Create debug configuration</h1>
<p>For the last part we are going to configure the debugger file, open it by Debug-&gt;Open Configurations and add to the configuration list the following structure</p>

<p>** Change the <Go-projects-folder> parameter to your golang projects root directory</Go-projects-folder></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
            "name": "Kubevirt",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "remotePath": "",
            "port": 2345,
            "host": "127.0.0.1",
            "program": "${fileDirname}",
            "env": {},
            "args": ["--kubeconfig", "cluster/k8s-1.9.3/.kubeconfig",
                     "--port", "1234"],
            "showLog": true,
            "cwd": "${workspaceFolder}/src/kubevirt.io/kubevirt",
            "output": "&lt;Go-projects-folder&gt;/bin/${fileBasenameNoExtension}"
}
</code></pre></div></div>
<p><img src="../assets/2018-05-22-Use-VS-Code-for-Kube-Virt-Development/debug-config.png" alt="debug-config" /></p>

<h1 id="debug-process">Debug Process</h1>
<p>For debug we need to open the main package we want to debug.</p>

<p>For example if we want to debug the virt-api component, open the main package:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubevirt.io/cmd/virt-api/virt-api.go
</code></pre></div></div>
<p><img src="../assets/2018-05-22-Use-VS-Code-for-Kube-Virt-Development/debug-file.png" alt="debug-file" /></p>

<p>Now change to debug view (ctrl+shift+D), check that we are using the kubevirt configuration and hit the play button</p>

<p><img src="../assets/2018-05-22-Use-VS-Code-for-Kube-Virt-Development/debug-view.png" alt="debug-view" /></p>

<h2 id="more-information">More Information</h2>
<p>For more information, keyboard shortcuts and advance vscode usage please refer the following link</p>

<p><a href="https://code.visualstudio.com/docs/editor/codebasics">editor code basics</a></p>

        </article>

        

<a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Use Vs Code For Kube Virt Development&url=/2018/Use-VS-Code-for-Kube-Virt-Development.html"><span>Tweet</span></a>
<hr/>


      </div>
    </div>
  </div>
</div>

    </section>

    <footer class="footer">
      <div class="container">
  <div class="row">
    <div class="col-sm-12 col-md-6 align-self-start">
      &copy; 2018 KubeVirt | <a href="/privacy">Privacy Statement</a>
    </div>
    <div class="col-sm-12 col-md-6 align-self-end social-link">
      <a href="https://twitter.com/kubevirt" style="margin-right: 1rem;">
        <i class="fab fa-twitter fa-lg"></i>
      </a>
      <a href="https://github.com/kubevirt" style="margin-right: 1rem;">
        <i class="fab fa-github fa-lg"></i>
      </a>
      <a href="https://groups.google.com/forum/#!forum/kubevirt-dev" style="margin-right: 1rem;">
        <i class="fas fa-envelope fa-lg"></i>
      </a>
      <a href="https://calendar.google.com/calendar/embed?src=18pc0jur01k8f2cccvn5j04j1g%40group.calendar.google.com&ctz=Etc%2FGMT">
        <i class="fas fa-calendar fa-lg"></i>
      </a>
    </div>
  </div>
</div>
<!--


    <h1>kubevirt.io</h1>


    <a href="https://twitter.com/kubevirt" class="btn btn-secondary footerIcon" title="Twitter">
      <span class="icon">
        <svg viewBox="0 0 16 16">
          <path fill="#fff" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
          c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
        </svg>
      </span>
    </a>


    <a href="https://github.com/kubevirt"  class="btn btn-secondary footerIcon" title="Github">
      <span class="icon">
        <svg viewBox="0 0 16 16">
          <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
        </svg>
      </span>
    </a>

    <a href="https://kiwiirc.com/client/irc.freenode.net/kubevirt" class="btn btn-secondary footerIcon" title="Mailing List" style="padding-top: 18px;">
      <span >IRC</span>
    </a>


    <a href="https://groups.google.com/forum/#!forum/kubevirt-dev" class="btn btn-secondary footerIcon">
      <span class="icon">
        <svg viewBox="0 0 16 16">
          <path style="fill:currentColor;fill-opacity:1;stroke:none" d="M 0 2 L 0 14 L 16 14 L 16 2 L 0 2 z M 1.4140625 3 L 14.585938 3 L 8 9.5859375 L 1.4140625 3 z M 1 4 L 5 8 L 1 12 L 1 4 z M 15 4 L 15 12 L 11 8 L 15 4 z M 5.7070312 8.7070312 L 8 11 L 10.292969 8.7070312 L 14.585938 13 L 1.4140625 13 L 5.7070312 8.7070312 z " id="rect4144" class="ColorScheme-Text"></path>
        </svg>
      </span>
    </a>


    <a href="https://calendar.google.com/calendar/embed?src=18pc0jur01k8f2cccvn5j04j1g%40group.calendar.google.com&ctz=Etc%2FGMT" class="btn btn-secondary footerIcon" title="Upcoming and past events">
      <span class="icon">
        <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" viewBox="0 -256 1850 1850" id="svg3025" version="1.1" inkscape:version="0.48.3.1 r9886" width="100%" height="100%" sodipodi:docname="calendar_font_awesome.svg">
          <metadata id="metadata3035">
            <rdf:RDF>
              <cc:Work rdf:about="">
                <dc:format>image/svg+xml</dc:format>
                <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
              </cc:Work>
            </rdf:RDF>
          </metadata>
          <defs id="defs3033"/>
          <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="640" inkscape:window-height="480" id="namedview3031" showgrid="false" inkscape:zoom="0.13169643" inkscape:cx="896" inkscape:cy="896" inkscape:window-x="0" inkscape:window-y="25" inkscape:window-maximized="0" inkscape:current-layer="svg3025"/>
          <g transform="matrix(1,0,0,-1,91.118644,1297.8644)" id="g3027">
            <path d="M 128,-128 H 416 V 160 H 128 v -288 z m 352,0 H 800 V 160 H 480 V -128 z M 128,224 H 416 V 544 H 128 V 224 z m 352,0 H 800 V 544 H 480 V 224 z M 128,608 H 416 V 896 H 128 V 608 z m 736,-736 h 320 V 160 H 864 V -128 z M 480,608 H 800 V 896 H 480 V 608 z m 768,-736 h 288 V 160 H 1248 V -128 z M 864,224 h 320 V 544 H 864 V 224 z m -352,864 v 288 q 0,13 -9.5,22.5 -9.5,9.5 -22.5,9.5 h -64 q -13,0 -22.5,-9.5 Q 384,1389 384,1376 v -288 q 0,-13 9.5,-22.5 9.5,-9.5 22.5,-9.5 h 64 q 13,0 22.5,9.5 9.5,9.5 9.5,22.5 z m 736,-864 h 288 V 544 H 1248 V 224 z M 864,608 h 320 V 896 H 864 V 608 z m 384,0 h 288 V 896 H 1248 V 608 z m 32,480 v 288 q 0,13 -9.5,22.5 -9.5,9.5 -22.5,9.5 h -64 q -13,0 -22.5,-9.5 -9.5,-9.5 -9.5,-22.5 v -288 q 0,-13 9.5,-22.5 9.5,-9.5 22.5,-9.5 h 64 q 13,0 22.5,9.5 9.5,9.5 9.5,22.5 z m 384,64 V -128 q 0,-52 -38,-90 -38,-38 -90,-38 H 128 q -52,0 -90,38 -38,38 -38,90 v 1280 q 0,52 38,90 38,38 90,38 h 128 v 96 q 0,66 47,113 47,47 113,47 h 64 q 66,0 113,-47 47,-47 47,-113 v -96 h 384 v 96 q 0,66 47,113 47,47 113,47 h 64 q 66,0 113,-47 47,-47 47,-113 v -96 h 128 q 52,0 90,-38 38,-38 38,-90 z" id="path3029" inkscape:connector-curvature="0" style="fill:currentColor"/>
          </g>
        </svg>
      </span>
    </a>

  </div>
</footer> -->

    </footer>

    <script defer src="https://use.fontawesome.com/releases/v5.1.0/js/all.js" integrity="sha384-3LK/3kTpDE/Pkp8gTNp2gR/2gOiwQ6QaO7Td0zV76UFJVhqLl4Vl3KL1We6q6wR9" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <script type="text/javascript">
      if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
      }
    </script>
  </body>
</html>
